<div class="container">
    <h1 class="title">Selecione o Endereço do Imóvel</h1>
    <form class="form-container" [formGroup]="form">
        <div class="first-child">
            <app-input-text
            formControlName="complement"
            [invalid]="form.controls['complement'].invalid"
            [label]="'Complemento'" 
            [icon]="'pi-info-circle'"></app-input-text>
            
            <app-input-number
            formControlName="number"
            [invalid]="form.controls['number'].invalid"
            [label]="'Número'" 
            [icon]="'pi-mobile'"></app-input-number>
        </div>

        <div class="card">
            <h1 class="title">Selecione o endereço do imóvel</h1>
            <div class="card">
                <p-table
                #dt
                [value]="addresses"
                dataKey="id"
                [rows]="10"
                [rowsPerPageOptions]="[10, 25, 50]"
                [loading]="loading"
                [paginator]="true"
                [globalFilterFields]="['street', 'district', 'city', 'state', 'country', 'cep', 'complement']"
                [tableStyle]="{ 'min-width': '75rem' }"
                >
                <ng-template #caption>
                    <div class="flex">
                        <p-iconfield iconPosition="left" class="ml-auto">
                            <p-inputicon>
                                <i class="pi pi-search"></i>
                            </p-inputicon>
                            <input
                            pInputText
                            type="text"
                            (input)="dt.filterGlobal($any($event.target).value, 'contains')"
                            placeholder="Busca por palavra chave"
                            />
                        </p-iconfield>
                    </div>
                </ng-template>
                <ng-template #header>
                    <tr>
                        <th></th>
                        <th>Rua/Avenida</th>
                        <th>Bairro</th>
                        <th>Cidade</th>
                        <th>Estado</th>
                        <th>País</th>
                        <th>CEP</th>
                        <th>Complemento</th>
                    </tr>
                    <tr>
                        <th></th>
                        <th>
                            <p-columnFilter
                            type="text"
                            field="street"
                            placeholder="Busca por Rua/Avenida"
                            ariaLabel="Busca por Rua/Avenida"
                            ></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter
                            type="text"
                            field="district"
                            placeholder="Busca por Bairro"
                            ariaLabel="Busca por Bairro"
                            ></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter
                            type="text"
                            field="city"
                            placeholder="Buscar por Cidade"
                            ariaLabel="Buscar por Cidade"
                            ></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter
                            type="text"
                            field="state"
                            placeholder="Buscar por Estado"
                            ariaLabel="Buscar por Estado"
                            ></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter
                            type="text"
                            field="country"
                            placeholder="Buscar por País"
                            ariaLabel="Buscar por País"
                            ></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter
                            type="text"
                            field="cep"
                            placeholder="Buscar por CEP"
                            ariaLabel="Buscar por CEP"
                            ></p-columnFilter>
                        </th>
                        <th>
                            <p-columnFilter
                            type="text"
                            field="complement"
                            placeholder="Buscar por Complemento"
                            ariaLabel="Buscar por Complemento"
                            ></p-columnFilter>
                        </th>
                    </tr>
                </ng-template>
                <ng-template #body let-address>
                    <tr [ngClass]="{'activated': address.id === form.get('residenceAddress')?.value}">
                        <td>
                            <p-button (click)="selected(address.id)" label="Selecionar" icon="pi pi-check-circle" iconPos="right" />
                        </td>
                        <td>
                            {{ address.street }}
                        </td>
                        <td>
                            {{ address.district }}
                        </td>
                        <td>
                            {{ address.city }} 
                        </td>
                        <td>
                            {{ address.state }} 
                        </td>
                        <td>
                            {{ address.country }} 
                        </td>
                        <td>
                            {{ address.cep }} 
                        </td>
                        <td>
                            {{ address.complement }} 
                        </td>
                    </tr>
                </ng-template>
                <ng-template #emptymessage>
                    <tr>
                        <td colspan="5">No customers found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</form>
</div>